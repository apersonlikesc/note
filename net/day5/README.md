## day5基础
共享信道有两种方法:
  - 静态划分信道:使用频分复用,时分复用这样的方式,每个用户都有自己的信道**(代价较高)**
  - 动态媒体接入控制:
    - 随机接入: 可随机发送信息,统一时刻的信息会发生碰撞,导致失败,需要有一个解决碰撞的网络协议
    - 受控接入: 用户要服从一定的控制,典型代表有分散控制的令牌环局域网和集中控制的多点线路探询(轮询)

局域网的数据链路层先前被分为两层:`逻辑链路控制llc子层`**(没用了)** 和`媒体接入控制mac子层`

适配器(网卡)与局域网之间通过串行传输,与计算机通过并行传输,**(两种传输方式进行转换)**

适配器有自己的`rom`和`ram`和处理器,在接受和发送帧的时候不使用cpu
计算机的`硬件地址`在适配器的`rom`中,软件地址(`ip地址`)在计算机的`储存器`中


**`csma/cd`协议:**
  - 载波监听: 不管在发送前还是在发送中都必须不停的检测信道
  - 多点接入: 接入在总线上
  - 碰撞检测: 边发送,边监听,一旦发现碰撞,立刻停止发送
  - 采用了无连接的工作方式,对于发送的帧不编号,不要求对方发回确认,遇到差错就抛弃,重传由高层协议决定,但以太网将当作新的帧来传输
  - 使用此协议的以太网不可能进行双通信,只能进行半双工通信,同一时间只有一台计算机发送数据
  - 每发送一帧要把已经发送的帧保存一下以免出现碰撞
  - 使用曼切斯特编码发送数据,当码元不再发生改变时不是`0`或者`1`表示发送完了

单程端到端的传播时延记作`t`(tao打不出来)

**争用期**:以太网的端到端往返时间,只要过了争用期没有发生碰撞,就可以放心,一般是`51.2us` 是以`10mbit/s`的传播速度传512比特的时间,也可以叫`512比特时间`

使用`截断二进制指数退避`的算法来碰撞后确定重传的时间,随机从`0-(2^k)-1`里选出一个整数r,推迟r倍的争用期,参数k是`min(重传次数,10)`,重传16次之后不成功就把帧丢弃,向高层报告

规定**最短的帧长是64字节**,长度**小于**64字节的属于**无效**的
当发生数据出现碰撞后,立刻停止发送并再发送`32bit`或`48bit`的人为干扰信号,总线占用的时间是`数据发送数据到发生碰撞停止时间`+`传播时延`+`干扰信号持续时间`

使用集线器的以太网实际上就是一个总线网,集线器**简单转发比特**,**不进行碰撞检测**,有少量容错能力和网络管理能力**(可以断开有故障的以太网)**

成功发送一个帧需要占用信道的时间是`t0(发送时间)`+`t(tao 单程端到端的时延)` `a=t/t0` a越小,资源被浪费的越少

极限信道利用率 `s(max) = t0/(t0+t)=1/(1+a)` 只有当参数a远小于1才能有高的极限信道利用率

每个适配器都有自己的mac地址,一般使用的是6个字节(48位)的地址
`mac` = `组织标识符(ieee确定,来卖给厂家,3个字节)`+`拓展标识符(厂家确定)`

组织标识符第一字节第一位 `0` 表示单个站地址 `1` 表示组地址,用来多播

第二位 `0` 表示全球管理(全球没用相同地址) `1` 表示本地管理(用户可以任意分配网络和桑的地址) **以太网几乎不理会这个第二位**(....无语)

帧有三种:单播(单体),多播(一部分),广播(所有)

适配器的混杂方式只要接受到帧,不管是发给谁的,都接受下来
mac帧的格式:`前同步码(调整适配器的时钟频率)`+`帧开始定位符(预备备)`+`目的地址`+`源地址`+`vlan标记(802.1Q标记 用于虚拟的局域网+标记控制信息 属于那个虚拟局域网)`+`类型/长度(长度基本没用)`+`数据`+`fcs(用来检验的码)`

mac帧的数据交给上一层时,上一层具有**识别有效数据长度**的功能

**以太网:**
`三个独立的以太网`的吞吐量是`一个独立的以太网`的三倍,但是将这三个独立的**连成**一个以太网,吞吐量就**还是**一个以太网的吞度量

适配器速率不同的话,按照**低**的速率进行传输

以太网交换机是一个多接口的网桥,**全双工通信**,每个接口直接与一个单台主机或者另一个以太网连接,相互通信的主机都是**独占媒体**,**无碰撞的传输数据**

通过交换表来传输数据(通过**自学习**来生成交换表,**每隔一段时间自动删除**),交换机一般有缓存转发,也有直接转发,**转发不能出现环路**
